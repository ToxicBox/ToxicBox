//jquery.toxicbox ver.1.0.6.min, MIT L, ToxicBox - C 2015-2016 Berestov Andrey, http://my-gallery.name
var toxicbox_options={};$(document).ready(function(){!function(){function t(){(navigator.userAgent.indexOf("Presto")+1||navigator.userAgent.indexOf("iPhone")+1||navigator.userAgent.indexOf("iPad")+1||navigator.userAgent.indexOf("Android")+1)&&(B=window.innerWidth)}function i(){return _=Math.round(window.outerWidth/window.innerWidth*100)/100}function o(){$("body").prepend('<img src="'+y+'loader.gif" alt="" id="toxic_loading" style="margin-top:'+(P/2-20+$(window).scrollTop())+"px;margin-left:"+(B/2-20+$(window).scrollLeft())+'px;"  />')}function e(){$("#toxic_loading").fadeIn(100)}function n(){h||$("#toxic_showbox .toxic_larrow a").remove(),p||$("#toxic_showbox .toxic_rarrow a").remove()}function c(t){function i(t){$(t).css({"max-height":""+(P-r.height()-2*k)+"px",width:"auto"}),C=$(t).width(),$(t).css("width",C+"px"),M=$(t).height()}var o,e,c=$("#toxic_showbox"),a=$("#toxic_loading");c.prepend('<img src="'+$(l).attr("href")+'" alt="" class="toxic_current toxic_hidden" style="max-width:'+(B-2*k)+"px;max-height:"+P+'px;" /><div id="toxic_textarea" class="toxic_hidden" style="min-height:44px;"></div>');var r=$("#toxic_textarea");for(e=0;W>e;e++)if(l==z[e]){o=e+1,h=z[e-1],p=z[e+1],$(new Image).attr("src",$(h).attr("href")),$(new Image).attr("src",$(p).attr("href"));break}$(".toxic_current").load(function(){M=$(this).height(),C=$(this).width(),i(this),t?(2==w&&(r.css("width",C-2*k-40).html('<div id="toxic_arrow_carrier" style="width:'+C+'px;"><div class="toxic_left toxic_larrow" style="margin-left:-20px;" ><a href="#back"><img src="'+y+'left.png" alt="" /></a></div><div class="toxic_left toxic_rarrow"><a href="#next"><img src="'+y+'right.png" alt="" /></a></div></div><p class="toxic_center countofimages">'+f.im+" "+o+" "+f.o+" "+W+'</p><p class="toxic_center toxic_title">'+t+"</p>"),n()),1==w&&r.html('<p class="toxic_center toxic_title" style="width:'+($(this).width()-40)+'px;padding-top:4px;">'+t+"</p>")):(2==w&&(r.html('<p class="toxic_center countofimages" >'+f.im+" "+o+" "+f.o+" "+W+"</p>").prepend('<div id="toxic_arrow_carrier" style="width:'+C+'px;"><div class="toxic_left toxic_larrow" style="margin-left:-20px;" ><a href="#back"><img src="'+y+'left.png" alt="" /></a></div><div class="toxic_left toxic_rarrow"><a href="#next"><img src="'+y+'right.png" alt="" /></a></div></div>'),n()),1==w&&r.css("height","20px").css("min-height",0)),i(this),$("#toxic_showbox .toxic_rarrow, #toxic_showbox .toxic_larrow").css("width",""+((C+20)/2-10)+"px"),M=r.height()+M,c.prepend('<a href="#index"><img id="toxic_close" class="toxic_hidden images_close" src="'+y+'close.png" alt="" /></a>'),$("#toxic_close").css({"margin-left":C-20+"px","margin-top":M-20+"px"}),c.animate({width:C,height:M,marginLeft:-(C/2-E/2),marginTop:-P/2+(P-M)/2+S/2},500/O,function(){a.fadeOut(100),r.css("width",C-40),$("#toxic_showbox .toxic_current, #toxic_showbox #toxic_textarea, #toxic_showbox #toxic_close").fadeIn(200/O)})})}function a(){var t=$(l).attr("title");$("body").append('<div id="toxic_dark" class="images_close"></div><div id="toxic_showbox" style="height:'+S+"px;width:"+E+"px;left:"+(B/2-k-E/2+$(window).scrollLeft())+"px;top:"+(P/2-k-S/2+$(window).scrollTop())+"px;padding:"+k+'px;"></div>'),o(),$(new Image).attr("src",""+$(l).attr("href")).load(c(t))}function r(){g=$("#"+$(l).attr("data-toxic-databox")),$("body").append('<div id="toxic_dark" class="div_close"></div><div id="toxic_showbox" style="height:'+S+"px;width:"+E+"px;left:"+(B/2-k-E/2+$(window).scrollLeft())+"px;top:"+(P/2-k-S/2+$(window).scrollTop())+"px;padding:"+k+'px;"></div>');var t=$("#toxic_showbox");o();var i=$("#toxic_loading");C=g.width()+parseInt(g.css("border-left-width"))+parseInt(g.css("border-right-width"))+parseInt(g.css("paddingLeft"))+parseInt(g.css("paddingLeft")),C==B&&("on"==I?(C=v,$(g).css("width",C+"px")):C=B-2*k),C>B&&(C=B-parseInt(g.css("border-left-width"))-parseInt(g.css("border-right-width"))-parseInt(g.css("paddingLeft"))-parseInt(g.css("paddingLeft"))-2*k,g.css({width:C+"px",height:"auto"}).find("iframe").attr("width",C)),$(l).attr("title")?(t.prepend('<h2 id="toxic_h2" style="width:'+C+'px;" class="toxic_hidden">'+$(l).attr("title")+"</h2>"),M=$(g).height()+parseInt($("#toxic_h2").css("height"))+20+parseInt(g.css("border-top-width"))+parseInt(g.css("border-bottom-width"))+parseInt(g.css("padding-top"))+parseInt(g.css("padding-bottom"))):M=$(g).height()+20+parseInt(g.css("border-top-width"))+parseInt(g.css("border-bottom-width"))+parseInt(g.css("padding-top"))+parseInt(g.css("padding-bottom")),t.animate({width:C,height:M,marginLeft:-(C/2-E/2),marginTop:-P/2+(P-M)/2+S/2},500/O,function(){t.append(g).append('<a href="#index"><img id="toxic_close" class="toxic_hidden div_close" src="'+y+'close.png" alt="" /></a>').css({"min-height":M+"px",height:"auto"}),g.fadeIn(200/O),$("#toxic_close.div_close").css("margin-left",""+C-20+"px").fadeIn(200/O),$("#toxic_h2").fadeIn(200/O),i.fadeOut(100,function(){$(this).remove()}),parseInt(t.css("top"))+(parseInt(t.css("margin-top"))-$(window).scrollTop())<0&&t.css("margin-top","0").css("top",$(window).scrollTop())})}function s(){g=$(l).attr("data-toxic-alert"),$("body").append('<div id="toxic_dark" class="images_close"></div><div id="toxic_showbox" class="alert" style="height:'+S+"px;width:"+E+"px;left:"+(B/2-k-E/2+$(window).scrollLeft())+"px;top:"+(P/2-k-S/2+$(window).scrollTop())+"px;padding:"+k+'px;"></div>');var t=$("#toxic_showbox");t.html('<p class="alert toxic_hidden" style="width:'+A+'px;">'+g+"</p>").prepend('<a href="#index"><img id="toxic_close" class="toxic_hidden images_close" src="'+y+'close.png" alt="" /></a>'),o();var i=$("#toxic_loading"),e=$("#toxic_showbox p");C=e.width(),M=e.height()+20,C>=B&&(C=B-2*k,$("#toxic_showbox p.alert").css("max-width",C+"px"),M=e.height()+20),t.animate({width:C,height:M,marginLeft:-(C/2-E/2),marginTop:-P/2+(P-M)/2+S/2},500/O,function(){e.fadeIn(200/O),$("#toxic_close.images_close").css({"margin-left":""+C-20+"px","margin-top":""+(M-21)+"px"}).fadeIn(200/O),i.fadeOut(100,function(){$(this).remove()})})}function d(t,i){l=t,i=$(l).attr("title"),e(),$(new Image).attr("src",$(l).attr("href")).load(function(){$("#toxic_showbox .toxic_current,#toxic_showbox #toxic_textarea, #toxic_showbox #toxic_close, #toxic_showbox #toxic_arrow_carrier").remove(),c(i)})}function x(){return E=$("#toxic_showbox").width(),S=$("#toxic_showbox").height(),$("#toxic_dark, #toxic_showbox, #toxic_loading").fadeOut(200/O,function(){$("#toxic_showbox").find(".div_close").length&&($("body").append(g),g.css("display","none")),3!=w&&$("#toxic_loading").remove(),$("#toxic_dark, #toxic_showbox").remove()}),!1}var h,p,l,g,w,_,f,u="en",m={im:"Фото",o:"из"},b={im:"Image",o:"of"},v=960,I="on",y="images/toxic/",k=5,O=1,A=300,L=150,T={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return T.Android()||T.BlackBerry()||T.iOS()||T.Opera()||T.Windows()}},B=$(window).width(),P=$(window).height(),W=$('a[data-toxic="group"]').length,z=$('a[data-toxic="group"]'),M=0,C=0;Object.keys(toxicbox_options).length&&(toxicbox_options.language&&(u=toxicbox_options.language),toxicbox_options.padding&&(k=toxicbox_options.padding),toxicbox_options.images_url&&(y=toxicbox_options.images_url),toxicbox_options.alert_width&&(A=toxicbox_options.alert_width),toxicbox_options.basic_width&&(v=toxicbox_options.basic_width),toxicbox_options.auto_width&&(I=toxicbox_options.auto_width),toxicbox_options.speed&&(O=toxicbox_options.speed),toxicbox_options.start_box_size&&(L=toxicbox_options.start_box_size));var E=L-2*k,S=E;$("a[data-toxic='single'], a[data-toxic='group']").addClass("toxic_zoom"),$(new Image).attr("src",y+"loader.gif"),f="ru"==u?m:b,t(),document.body.addEventListener("touchend",function(o){_=i(),B=screen.width/_,P=window.innerHeight,t()},!1),$(window).resize(function(){if(!T.any()){var t=$("#toxic_showbox");_=i(),B=$(window).width(),P=$(window).height(),t&&(t.css({"margin-left":"0px","margin-top":"0px",left:B/2-(C/2+k)+$(window).scrollLeft()+"px",top:P/2+$(window).scrollTop()-(M/2+k)+"px"}),parseInt(t.css("top"))<0&&t.css("top","0"))}}),$(document).on("click",".toxic_larrow a",function(){return d(h),!1}).on("click",".toxic_rarrow a",function(){return d(p),!1}).on("click",'a[data-toxic="group"]',function(){return w=2,l=this,a(),!1}).on("click",'a[data-toxic="single"]',function(){return w=1,l=this,a(),!1}).on("click","[data-toxic-databox]",function(){return w=3,l=this,r(),!1}).on("click","[data-toxic-alert]",function(){return w=3,l=this,s(),!1}).on("click","#toxic_dark, #toxic_close",function(){return x(),!1}).keyup(function(t){27==t.keyCode&&x()})}()});
