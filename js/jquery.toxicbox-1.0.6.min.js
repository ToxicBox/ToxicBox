//jquery.toxicbox ver.1.0.6.min, MIT L, ToxicBox - C 2015-2016 Berestov Andrey, http://my-gallery.name
var toxicbox_options={};$(document).ready(function(){!function(){function t(){return w=Math.round(window.outerWidth/window.innerWidth*100)/100}function i(){$("body").prepend('<img src="'+I+'loader.gif" alt="" id="toxic_loading" style="margin-top:'+(P/2-20+$(window).scrollTop())+"px;margin-left:"+(T/2-20+$(window).scrollLeft())+'px;"  />')}function o(){$("#toxic_loading").fadeIn(100)}function e(){x||$("#toxic_showbox .toxic_larrow a").remove(),h||$("#toxic_showbox .toxic_rarrow a").remove()}function n(t){function i(t){$(t).css({"max-height":""+(P-r.height()-2*y)+"px",width:"auto"}),M=$(t).width(),$(t).css("width",M+"px"),z=$(t).height()}var o,n,c=$("#toxic_showbox"),a=$("#toxic_loading");c.prepend('<img src="'+$(p).attr("href")+'" alt="" class="toxic_current toxic_hidden" style="max-width:'+(T-2*y)+"px;max-height:"+P+'px;" /><div id="toxic_textarea" class="toxic_hidden" style="min-height:44px;"></div>');var r=$("#toxic_textarea");for(n=0;B>n;n++)if(p==W[n]){o=n+1,x=W[n-1],h=W[n+1],$(new Image).attr("src",$(x).attr("href")),$(new Image).attr("src",""+$(h).attr("href"));break}$(".toxic_current").load(function(){z=$(this).height(),M=$(this).width(),i(this),t?(2==g&&(r.css("width",M-2*y-40).html('<div id="toxic_arrow_carrier" style="width:'+M+'px;"><div class="toxic_left toxic_larrow" style="margin-left:-20px;" ><a href="#back"><img src="'+I+'left.png" alt="" /></a></div><div class="toxic_left toxic_rarrow"><a href="#next"><img src="'+I+'right.png" alt="" /></a></div></div><p class="toxic_center countofimages">'+_.im+" "+o+" "+_.o+" "+B+'</p><p class="toxic_center toxic_title">'+t+"</p>"),e()),1==g&&r.html('<p class="toxic_center toxic_title" style="width:'+($(this).width()-40)+'px;padding-top:4px;">'+t+"</p>")):(2==g&&(r.html('<p class="toxic_center countofimages" >'+_.im+" "+o+" "+_.o+" "+B+"</p>").prepend('<div id="toxic_arrow_carrier" style="width:'+M+'px;"><div class="toxic_left toxic_larrow" style="margin-left:-20px;" ><a href="#back"><img src="'+I+'left.png" alt="" /></a></div><div class="toxic_left toxic_rarrow"><a href="#next"><img src="'+I+'right.png" alt="" /></a></div></div>'),e()),1==g&&r.css("height","20px").css("min-height",0)),i(this),$("#toxic_showbox .toxic_rarrow, #toxic_showbox .toxic_larrow").css("width",""+((M+20)/2-10)+"px"),z=r.height()+z,c.prepend('<a href="#index"><img id="toxic_close" class="toxic_hidden images_close" src="'+I+'close.png" alt="" /></a>'),$("#toxic_close").css({"margin-left":""+M-20+"px","margin-top":""+(z-20)+"px"}),c.animate({width:M,height:z,marginLeft:-(M/2-C/2),marginTop:-P/2+(P-z)/2+E/2},500/k,function(){a.fadeOut(100),r.css("width",M-40),$("#toxic_showbox .toxic_current, #toxic_showbox #toxic_textarea, #toxic_showbox #toxic_close").fadeIn(200/k)})})}function c(){var t=$(p).attr("title");$("body").append('<div id="toxic_dark" class="images_close"></div><div id="toxic_showbox" style="height:'+E+"px;width:"+C+"px;left:"+(T/2-y-C/2+$(window).scrollLeft())+"px;top:"+(P/2-y-E/2+$(window).scrollTop())+"px;padding:"+y+'px;"></div>'),i(),$(new Image).attr("src",""+$(p).attr("href")).load(n(t))}function a(){l=$("#"+$(p).attr("data-toxic-databox")),$("body").append('<div id="toxic_dark" class="div_close"></div><div id="toxic_showbox" style="height:'+E+"px;width:"+C+"px;left:"+(T/2-y-C/2+$(window).scrollLeft())+"px;top:"+(P/2-y-E/2+$(window).scrollTop())+"px;padding:"+y+'px;"></div>');var t=$("#toxic_showbox");i();var o=$("#toxic_loading");M=l.width()+parseInt(l.css("border-left-width"))+parseInt(l.css("border-right-width"))+parseInt(l.css("paddingLeft"))+parseInt(l.css("paddingLeft")),M==T&&("on"==v?(M=b,$(l).css("width",M+"px")):M=T-2*y),M>T&&(M=T-parseInt(l.css("border-left-width"))-parseInt(l.css("border-right-width"))-parseInt(l.css("paddingLeft"))-parseInt(l.css("paddingLeft"))-2*y,l.css({width:M+"px",height:"auto"}).find("iframe").attr("width",M)),$(p).attr("title")?(t.prepend('<h2 id="toxic_h2" style="width:'+M+'px;" class="toxic_hidden">'+$(p).attr("title")+"</h2>"),z=$(l).height()+parseInt($("#toxic_h2").css("height"))+20+parseInt(l.css("border-top-width"))+parseInt(l.css("border-bottom-width"))+parseInt(l.css("padding-top"))+parseInt(l.css("padding-bottom"))):z=$(l).height()+20+parseInt(l.css("border-top-width"))+parseInt(l.css("border-bottom-width"))+parseInt(l.css("padding-top"))+parseInt(l.css("padding-bottom")),t.animate({width:M,height:z,marginLeft:-(M/2-C/2),marginTop:-P/2+(P-z)/2+E/2},500/k,function(){t.append(l),t.append('<a href="#index"><img id="toxic_close" class="toxic_hidden div_close" src="'+I+'close.png" alt="" /></a>').css({"min-height":z+"px",height:"auto"}),l.fadeIn(200/k),$("#toxic_close.div_close").css("margin-left",""+M-20+"px").fadeIn(200/k),$("#toxic_h2").fadeIn(200/k),o.fadeOut(100,function(){$(this).remove()}),parseInt(t.css("top"))+(parseInt(t.css("margin-top"))-$(window).scrollTop())<0&&t.css("margin-top","0").css("top",$(window).scrollTop())})}function r(){l=$(p).attr("data-toxic-alert"),$("body").append('<div id="toxic_dark" class="images_close"></div><div id="toxic_showbox" class="alert" style="height:'+E+"px;width:"+C+"px;left:"+(T/2-y-C/2+$(window).scrollLeft())+"px;top:"+(P/2-y-E/2+$(window).scrollTop())+"px;padding:"+y+'px;"></div>');var t=$("#toxic_showbox");t.html('<p class="alert toxic_hidden" style="width:'+A+'px;">'+l+"</p>").prepend('<a href="#index"><img id="toxic_close" class="toxic_hidden images_close" src="'+I+'close.png" alt="" /></a>'),i();var o=$("#toxic_loading"),e=$("#toxic_showbox p");M=e.width(),z=e.height()+20,M>=T&&(M=T-2*y,$("#toxic_showbox p.alert").css("max-width",M+"px"),z=e.height()+20),t.animate({width:M,height:z,marginLeft:-(M/2-C/2),marginTop:-P/2+(P-z)/2+E/2},500/k,function(){e.fadeIn(200/k),$("#toxic_close.images_close").css({"margin-left":""+M-20+"px","margin-top":""+(z-21)+"px"}).fadeIn(200/k),o.fadeOut(100,function(){$(this).remove()})})}function s(t,i){p=t,i=$(p).attr("title"),o(),$(new Image).attr("src",$(p).attr("href")).load(function(){$("#toxic_showbox .toxic_current,#toxic_showbox #toxic_textarea, #toxic_showbox #toxic_close, #toxic_showbox #toxic_arrow_carrier").remove(),n(i)})}function d(){return C=$("#toxic_showbox").width(),E=$("#toxic_showbox").height(),$("#toxic_dark, #toxic_showbox, #toxic_loading").fadeOut(200/k,function(){$("#toxic_showbox").find(".div_close").length&&($("body").append(l),l.css("display","none")),3!=g&&$("#toxic_loading").remove(),$("#toxic_dark, #toxic_showbox").remove()}),!1}var x,h,p,l,g,w,_,f="en",u={im:"Фото",o:"из"},m={im:"Image",o:"of"},b=960,v="on",I="images/toxic/",y=5,k=1,A=300,O=150,L={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return L.Android()||L.BlackBerry()||L.iOS()||L.Opera()||L.Windows()}},T=$(window).width(),P=$(window).height(),B=$('a[data-toxic="group"]').length,W=$('a[data-toxic="group"]'),z=0,M=0;Object.keys(toxicbox_options).length&&(toxicbox_options.language&&(f=toxicbox_options.language),toxicbox_options.padding&&(y=toxicbox_options.padding),toxicbox_options.images_url&&(I=toxicbox_options.images_url),toxicbox_options.alert_width&&(A=toxicbox_options.alert_width),toxicbox_options.basic_width&&(b=toxicbox_options.basic_width),toxicbox_options.auto_width&&(v=toxicbox_options.auto_width),toxicbox_options.speed&&(k=toxicbox_options.speed),toxicbox_options.start_box_size&&(O=toxicbox_options.start_box_size));var C=O-2*y,E=C;$("a[data-toxic='single'], a[data-toxic='group']").addClass("toxic_zoom"),$(new Image).attr("src",I+"loader.gif"),_="ru"==f?u:m,(navigator.userAgent.indexOf("iPhone")+1||navigator.userAgent.indexOf("Android")+1)&&(T=window.innerWidth),document.body.addEventListener("touchend",function(i){w=t(),T=screen.width/w,P=window.innerHeight,(navigator.userAgent.indexOf("Presto")+1||navigator.userAgent.indexOf("iPhone")+1||navigator.userAgent.indexOf("iPad")+1||navigator.userAgent.indexOf("Android")+1)&&(T=window.innerWidth)},!1),$(window).resize(function(){if(!L.any()){var i=$("#toxic_showbox");w=t(),T=$(window).width(),P=$(window).height(),i&&(i.css({"margin-left":"0px","margin-top":"0px",left:T/2-(M/2+y)+$(window).scrollLeft()+"px",top:P/2+$(window).scrollTop()-(z/2+y)+"px"}),parseInt(i.css("top"))<0&&i.css("top","0"))}}),$(document).on("click",".toxic_larrow a",function(){return s(x),!1}),$(document).on("click",".toxic_rarrow a",function(){return s(h),!1}),$(document).on("click",'a[data-toxic="group"]',function(){return g=2,p=this,c(),!1}),$(document).on("click",'a[data-toxic="single"]',function(){return g=1,p=this,c(),!1}),$(document).on("click","[data-toxic-databox]",function(){return g=3,p=this,a(),!1}),$(document).on("click","[data-toxic-alert]",function(){return g=3,p=this,r(),!1}),$(document).on("click","#toxic_dark, #toxic_close",function(){return d(),!1}),$(document).keyup(function(t){27==t.keyCode&&d()})}()});
