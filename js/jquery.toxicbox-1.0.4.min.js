//jquery.toxicbox ver.1.0.4.min, MIT L, ToxicBox - C 2015-2016 Berestov Andrey, http://my-gallery.name
var toxicbox_options={};$(document).ready(function(){!function(){function t(){return z=Math.round(window.outerWidth/window.innerWidth*100)/100}function o(){$("body").prepend('<img src="'+_+'loader.gif" alt="" id="toxic_loading" style="margin-top:'+(O/2-20+$(window).scrollTop())+"px;margin-left:"+(A/2-20+$(window).scrollLeft())+'px;"  />')}function e(){$("#toxic_loading").fadeIn(100)}function n(){L||$("#toxic_showbox .toxic_larrow a").remove(),T||$("#toxic_showbox .toxic_rarrow a").remove()}function a(t){function o(t){$(t).css({"max-height":""+(O-parseInt(c.css("height"))-2*f)+"px",width:"auto"}),C=parseInt($(t).css("width")),$(t).css("width",C),M=$(t).height()}var e,a=$("#toxic_showbox"),s=$("#toxic_loading");a.prepend('<img src="'+$(P).attr("href")+'" alt="" class="toxic_current toxic_hidden" style="max-width:'+(A-2*f)+"px;max-height:"+O+'px;" /><div id="toxic_textarea" class="toxic_hidden" style="min-height:44px;"></div>');var c=$("#toxic_textarea");for(i=0;i<y;i++)if(P==k[i]){e=i+1,L=k[i-1],T=k[i+1],$(new Image).attr("src",""+$(L).attr("href")),$(new Image).attr("src",""+$(T).attr("href"));break}$(".toxic_current").load(function(){M=$(this).height(),C=$(this).width(),o(this),t?(2==W&&(c.css("width",C-2*f-40).html('<div id="toxic_arrow_carrier" style="width:'+C+'px;"><div class="toxic_left toxic_larrow" style="margin-left:-20px;" ><a href="#back"><img src="'+_+'left.png" alt="" /></a></div><div class="toxic_left toxic_rarrow"><a href="#next"><img src="'+_+'right.png" alt="" /></a></div></div><p class="toxic_center countofimages">'+I.im+" "+e+" "+I.o+" "+y+'</p><p class="toxic_center toxic_title">'+t+"</p>"),n()),1==W&&c.html('<p class="toxic_center toxic_title" style="width:'+(parseInt($(this).css("width"))-40)+'px;padding-top:4px;">'+t+"</p>")):(2==W&&(c.html('<p class="toxic_center countofimages" >'+I.im+" "+e+" "+I.o+" "+y+"</p>").prepend('<div id="toxic_arrow_carrier" style="width:'+C+'px;"><div class="toxic_left toxic_larrow" style="margin-left:-20px;" ><a href="#back"><img src="'+_+'left.png" alt="" /></a></div><div class="toxic_left toxic_rarrow"><a href="#next"><img src="'+_+'right.png" alt="" /></a></div></div>'),n()),1==W&&c.css("height",20).css("min-height",0)),o(this),$("#toxic_showbox .toxic_rarrow, #toxic_showbox .toxic_larrow").css("width",""+((C+20)/2-10)+"px"),M=parseInt(c.css("height"))+M,a.prepend('<a href="#index"><img id="toxic_close" class="toxic_hidden images_close" src="'+_+'close.png" alt="" /></a>'),$("#toxic_close").css({"margin-left":""+C-20+"px","margin-top":""+(M-20)+"px"}),t&&1==W&&$("#toxic_close").css({"margin-left":""+C-20+"px","margin-top":""+(M-20)+"px"}),a.animate({width:C,height:M,marginLeft:-(C/2-E/2),marginTop:-O/2+(O-M)/2+S/2},500/u,function(){s.fadeOut(100),c.css("width",C-40),$("#toxic_showbox .toxic_current, #toxic_showbox #toxic_textarea, #toxic_showbox #toxic_close").fadeIn(200/u)})})}function s(){var t=$(P).attr("title");$("body").append('<div id="toxic_dark" class="images_close"></div><div id="toxic_showbox" style="height:'+S+"px;width:"+E+"px;left:"+(A/2-f-E/2+$(window).scrollLeft())+"px;top:"+(O/2-f-S/2+$(window).scrollTop())+"px;padding:"+f+'px;"></div>'),o(),$(new Image).attr("src",""+$(P).attr("href")).load(a(t))}function c(){B=$("#"+$(P).attr("data-toxic-databox")),$("body").append('<div id="toxic_dark" class="div_close"></div><div id="toxic_showbox" style="height:'+S+"px;width:"+E+"px;left:"+(A/2-f-E/2+$(window).scrollLeft())+"px;top:"+(O/2-f-S/2+$(window).scrollTop())+"px;padding:"+f+'px;"></div>');var t=$("#toxic_showbox");o();var i=$("#toxic_loading");C=B.width()+parseInt(B.css("border-left-width"))+parseInt(B.css("border-right-width"))+parseInt(B.css("paddingLeft"))+parseInt(B.css("paddingLeft")),C==A&&("on"==w?(C=g,$(B).css("width",C)):C=A-2*f-10),C>A&&(C=A-parseInt(B.css("border-left-width"))-parseInt(B.css("border-right-width"))-parseInt(B.css("paddingLeft"))-parseInt(B.css("paddingLeft"))-2*f,B.css({width:C,height:"auto"}).find("iframe").attr("width",C)),$(P).attr("title")?(t.prepend('<h2 id="toxic_h2" style="width:'+C+'px;" class="toxic_hidden">'+$(P).attr("title")+"</h2>"),M=parseInt($(B).css("height"))+parseInt($("#toxic_h2").css("height"))+20+parseInt(B.css("border-top-width"))+parseInt(B.css("border-bottom-width"))+parseInt(B.css("padding-top"))+parseInt(B.css("padding-bottom"))):M=parseInt($(B).css("height"))+20+parseInt(B.css("border-top-width"))+parseInt(B.css("border-bottom-width"))+parseInt(B.css("padding-top"))+parseInt(B.css("padding-bottom")),t.animate({width:C,height:M,marginLeft:-(C/2-E/2),marginTop:-O/2+(O-M)/2+S/2},500/u,function(){t.append(B),t.append('<a href="#index"><img id="toxic_close" class="toxic_hidden div_close" src="'+_+'close.png" alt="" /></a>'),B.fadeIn(200/u),$("#toxic_close.div_close").css("margin-left",""+C-20+"px").fadeIn(200/u),$("#toxic_h2").fadeIn(200/u),i.fadeOut(100,function(){$(this).remove()}),parseInt(t.css("top"))+(parseInt(t.css("margin-top"))-$(window).scrollTop())<0&&t.css("margin-top","0").css("top",$(window).scrollTop()),t.css({"min-height":M,height:"auto"})})}function r(){B=$(P).attr("data-toxic-alert"),$("body").append('<div id="toxic_dark" class="images_close"></div><div id="toxic_showbox" class="alert" style="height:'+S+"px;width:"+E+"px;left:"+(A/2-f-E/2+$(window).scrollLeft())+"px;top:"+(O/2-f-S/2+$(window).scrollTop())+"px;padding:"+f+'px;"></div>');var t=$("#toxic_showbox");t.html('<p class="alert toxic_hidden" style="width:'+m+'px;">'+B+"</p>"),t.prepend('<a href="#index"><img id="toxic_close" class="toxic_hidden images_close" src="'+_+'close.png" alt="" /></a>'),o();var i=$("#toxic_loading"),e=$("#toxic_showbox p");C=parseInt(e.css("width")),M=parseInt(e.css("height"))+20,C>=A&&(C=A-2*f,$("#toxic_showbox p.alert").css("max-width",C+"px"),M=parseInt(e.css("height"))+20),t.animate({width:C,height:M,marginLeft:-(C/2-E/2),marginTop:-O/2+(O-M)/2+S/2},500/u,function(){e.fadeIn(200/u),$("#toxic_close.images_close").css({"margin-left":""+C-20+"px","margin-top":""+(M-21)+"px"}).fadeIn(200/u),i.fadeOut(100,function(){$(this).remove()})})}function d(t,i){P=t,i=$(P).attr("title"),e(),$(new Image).attr("src",""+$(P).attr("href")).load(function(){$("#toxic_showbox .toxic_current,#toxic_showbox #toxic_textarea, #toxic_showbox #toxic_close, #toxic_showbox #toxic_arrow_carrier").remove(),a(i)})}function x(){return E=parseInt($("#toxic_showbox").css("width")),S=parseInt($("#toxic_showbox").css("height")),$("#toxic_dark, #toxic_showbox, #toxic_loading").fadeOut(200/u,function(){$("#toxic_showbox").find(".div_close").length&&($("body").append(B),B.css("display","none")),3!=W&&$("#toxic_loading").remove(),$("#toxic_dark, #toxic_showbox").remove()}),!1}var p="en",h={im:"Фото",o:"из"},l={im:"Image",o:"of"},g=960,w="on",_="images/toxic/",f=5,u=1,m=300,b=250,v={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return v.Android()||v.BlackBerry()||v.iOS()||v.Opera()||v.Windows()}};if($("a[data-toxic='single'], a[data-toxic='group']").addClass("toxic_zoom"),$(new Image).attr("src",_+"loader.gif"),Object.keys(toxicbox_options).length>0&&(toxicbox_options.language&&(p=toxicbox_options.language),toxicbox_options.padding&&(f=toxicbox_options.padding),toxicbox_options.images_url&&(_=toxicbox_options.images_url),toxicbox_options.alert_width&&(m=toxicbox_options.alert_width),toxicbox_options.basic_width&&(g=toxicbox_options.basic_width),toxicbox_options.auto_width&&(w=toxicbox_options.auto_width),toxicbox_options.speed&&(u=toxicbox_options.speed),toxicbox_options.start_box_size&&(b=toxicbox_options.start_box_size)),"ru"==p)var I=h;else var I=l;if($('a[data-toxic="group"]'))var y=$('a[data-toxic="group"]').length,k=$('a[data-toxic="group"]');var A=$(window).width(),O=$(window).height();(navigator.userAgent.indexOf("iPhone")+1||navigator.userAgent.indexOf("Android")+1)&&(A=window.innerWidth);var L,T,P,B,W,z,M=0,C=0,E=b-2*f,S=E;document.body.addEventListener("touchend",function(i){z=t();i.touches;A=screen.width/z,O=window.innerHeight,(navigator.userAgent.indexOf("Presto")+1||navigator.userAgent.indexOf("iPhone")+1||navigator.userAgent.indexOf("iPad")+1||navigator.userAgent.indexOf("Android")+1)&&(A=window.innerWidth)},!1),$(window).resize(function(){if(!v.any()){var i=$("#toxic_showbox");z=t(),A=$(window).width(),O=$(window).height(),i&&(i.css({left:"0px",top:"0px","margin-left":"0px","margin-top":"0px",left:A/2-(C/2+f)+$(window).scrollLeft()+"px",top:O/2+$(window).scrollTop()-(M/2+f)+"px"}),parseInt(i.css("top"))<0&&i.css("top","0"))}}),$(document).on("click",".toxic_larrow a",function(){return d(L),!1}),$(document).on("click",".toxic_rarrow a",function(){return d(T),!1}),$(document).on("click",'a[data-toxic="group"]',function(){return W=2,P=this,s(),!1}),$(document).on("click",'a[data-toxic="single"]',function(){return W=1,P=this,s(),!1}),$(document).on("click","[data-toxic-databox]",function(){return W=3,P=this,c(),!1}),$(document).on("click","[data-toxic-alert]",function(){return W=3,P=this,r(),!1}),$(document).on("click","#toxic_dark, #toxic_close",function(){return x(),!1}),$(document).keyup(function(t){27==t.keyCode&&x()})}()});